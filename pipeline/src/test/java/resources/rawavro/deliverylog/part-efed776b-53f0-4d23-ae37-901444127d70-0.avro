Objavro.schema∫‚{"type":"record","name":"DeliveryLog","namespace":"ai.promoted.proto.delivery","fields":[{"name":"platform_id","type":"long","default":0},{"name":"request","type":["null",{"type":"record","name":"FlatRequest","fields":[{"name":"platform_id","type":"long","default":0},{"name":"user_info","type":["null",{"type":"record","name":"UserInfo","namespace":"ai.promoted.proto.common","fields":[{"name":"user_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"log_user_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"is_internal_user","type":"boolean","default":false},{"name":"ignore_usage","type":"boolean","default":false},{"name":"anon_user_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"has_user_id","type":"boolean","default":false}]}],"default":null},{"name":"timing","type":["null",{"type":"record","name":"Timing","namespace":"ai.promoted.proto.common","fields":[{"name":"client_log_timestamp","type":"long","default":0},{"name":"event_api_timestamp","type":"long","default":0},{"name":"log_timestamp","type":"long","default":0}]}],"default":null},{"name":"client_info","type":["null",{"type":"record","name":"ClientInfo","namespace":"ai.promoted.proto.common","fields":[{"name":"client_type","type":{"type":"enum","name":"ClientType","namespace":"ai.promoted.proto.common.ClientInfo","symbols":["UNKNOWN_REQUEST_CLIENT","PLATFORM_SERVER","PLATFORM_CLIENT","PROMOTED_REPLAYER","PROMOTED_DEV_MACHINE","UNRECOGNIZED"]},"default":"UNKNOWN_REQUEST_CLIENT"},{"name":"traffic_type","type":{"type":"enum","name":"TrafficType","namespace":"ai.promoted.proto.common.ClientInfo","symbols":["UNKNOWN_TRAFFIC_TYPE","PRODUCTION","REPLAY","INTERNAL","SHADOW","LOAD_TEST","UNRECOGNIZED"]},"default":"UNKNOWN_TRAFFIC_TYPE"}]}],"default":null},{"name":"device","type":["null",{"type":"record","name":"Device","namespace":"ai.promoted.proto.common","fields":[{"name":"device_type","type":{"type":"enum","name":"DeviceType","symbols":["UNKNOWN_DEVICE_TYPE","DESKTOP","MOBILE","TABLET","UNRECOGNIZED"]},"default":"UNKNOWN_DEVICE_TYPE"},{"name":"brand","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"manufacturer","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"identifier","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"os_version","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"locale","type":["null",{"type":"record","name":"Locale","fields":[{"name":"language_code","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"region_code","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"screen","type":["null",{"type":"record","name":"Screen","fields":[{"name":"size","type":["null",{"type":"record","name":"Size","fields":[{"name":"width","type":"int","default":0},{"name":"height","type":"int","default":0}]}],"default":null},{"name":"scale","type":"float","default":0}]}],"default":null},{"name":"ip_address","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"location","type":["null",{"type":"record","name":"Location","fields":[{"name":"latitude","type":"double","default":0},{"name":"longitude","type":"double","default":0},{"name":"accuracy_in_meters","type":"double","default":0}]}],"default":null},{"name":"browser","type":["null",{"type":"record","name":"Browser","fields":[{"name":"user_agent","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"viewport_size","type":["null","Size"],"default":null},{"name":"client_hints","type":["null",{"type":"record","name":"ClientHints","fields":[{"name":"is_mobile","type":"boolean","default":false},{"name":"brand","type":{"type":"array","items":{"type":"record","name":"ClientHintBrand","fields":[{"name":"brand","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"version","type":{"type":"string","avro.java.string":"String"},"default":""}]}},"default":[]},{"name":"architecture","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"model","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"platform","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"platform_version","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"ua_full_version","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"referrer","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"platform_app_version","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"promoted_mobile_sdk_version","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"request_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"view_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"auto_view_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"session_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"client_request_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"use_case","type":{"type":"enum","name":"UseCase","symbols":["UNKNOWN_USE_CASE","CUSTOM","SEARCH","SEARCH_SUGGESTIONS","FEED","RELATED_CONTENT","CLOSE_UP","CATEGORY_CONTENT","MY_CONTENT","MY_SAVED_CONTENT","SELLER_CONTENT","DISCOVER","UNRECOGNIZED"]},"default":"UNKNOWN_USE_CASE"},{"name":"search_query","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"paging","type":["null",{"type":"record","name":"Paging","fields":[{"name":"paging_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"size","type":"int","default":0},{"name":"cursor","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"offset","type":"int","default":0}]}],"default":null},{"name":"insertion","type":{"type":"array","items":{"type":"record","name":"Insertion","fields":[{"name":"platform_id","type":"long","default":0},{"name":"user_info","type":["null","ai.promoted.proto.common.UserInfo"],"default":null},{"name":"timing","type":["null","ai.promoted.proto.common.Timing"],"default":null},{"name":"client_info","type":["null","ai.promoted.proto.common.ClientInfo"],"default":null},{"name":"insertion_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"request_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"view_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"auto_view_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"session_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"content_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"position","type":"long","default":0},{"name":"properties","type":["null",{"type":"record","name":"FlatProperties","namespace":"ai.promoted.proto.common","fields":[{"name":"struct_bytes","type":"bytes","default":""},{"name":"struct","type":["null",{"type":"record","name":"Struct1","fields":[{"name":"fields","type":{"type":"array","items":{"type":"record","name":"FieldsEntry","namespace":"ai.promoted.proto.common.Struct1","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Value1","namespace":"ai.promoted.proto.common","fields":[{"name":"null_value","type":{"type":"enum","name":"NullValue","namespace":"com.google.protobuf","symbols":["NULL_VALUE","UNRECOGNIZED"]},"default":"NULL_VALUE"},{"name":"number_value","type":"double","default":0},{"name":"string_value","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"bool_value","type":"boolean","default":false},{"name":"struct_value","type":["null",{"type":"record","name":"Struct2","fields":[{"name":"fields","type":{"type":"array","items":{"type":"record","name":"FieldsEntry","namespace":"ai.promoted.proto.common.Struct2","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Value2","namespace":"ai.promoted.proto.common","fields":[{"name":"null_value","type":"com.google.protobuf.NullValue","default":"NULL_VALUE"},{"name":"number_value","type":"double","default":0},{"name":"string_value","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"bool_value","type":"boolean","default":false},{"name":"struct_value","type":["null",{"type":"record","name":"Struct3","fields":[{"name":"fields","type":{"type":"array","items":{"type":"record","name":"FieldsEntry","namespace":"ai.promoted.proto.common.Struct3","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Value3","namespace":"ai.promoted.proto.common","fields":[{"name":"null_value","type":"com.google.protobuf.NullValue","default":"NULL_VALUE"},{"name":"number_value","type":"double","default":0},{"name":"string_value","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"bool_value","type":"boolean","default":false},{"name":"struct_value","type":["null",{"type":"record","name":"Struct4","fields":[{"name":"fields","type":{"type":"array","items":{"type":"record","name":"FieldsEntry","namespace":"ai.promoted.proto.common.Struct4","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Value4","namespace":"ai.promoted.proto.common","fields":[{"name":"null_value","type":"com.google.protobuf.NullValue","default":"NULL_VALUE"},{"name":"number_value","type":"double","default":0},{"name":"string_value","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"bool_value","type":"boolean","default":false},{"name":"struct_value","type":["null",{"type":"record","name":"Struct5","fields":[{"name":"fields","type":{"type":"array","items":{"type":"record","name":"FieldsEntry","namespace":"ai.promoted.proto.common.Struct5","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Value5","namespace":"ai.promoted.proto.common","fields":[{"name":"null_value","type":"com.google.protobuf.NullValue","default":"NULL_VALUE"},{"name":"number_value","type":"double","default":0},{"name":"string_value","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"bool_value","type":"boolean","default":false}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"list_value","type":["null",{"type":"record","name":"ListValue5","fields":[{"name":"values","type":{"type":"array","items":"Value5"},"default":[]}]}],"default":null}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"list_value","type":["null",{"type":"record","name":"ListValue4","fields":[{"name":"values","type":{"type":"array","items":"Value4"},"default":[]}]}],"default":null}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"list_value","type":["null",{"type":"record","name":"ListValue3","fields":[{"name":"values","type":{"type":"array","items":"Value3"},"default":[]}]}],"default":null}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"list_value","type":["null",{"type":"record","name":"ListValue2","fields":[{"name":"values","type":{"type":"array","items":"Value2"},"default":[]}]}],"default":null}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"struct_json","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"feature_stage","type":["null",{"type":"record","name":"FeatureStage","fields":[{"name":"features","type":["null",{"type":"record","name":"Features","namespace":"ai.promoted.proto.delivery.internal.features","fields":[{"name":"numeric","type":{"type":"array","items":{"type":"record","name":"NumericEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"int","default":0},{"name":"value","type":"float","default":0}]}},"default":[]},{"name":"categorical","type":{"type":"array","items":{"type":"record","name":"CategoricalEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"int","default":0},{"name":"value","type":{"type":"string","avro.java.string":"String"},"default":""}]}},"default":[]},{"name":"sparse","type":{"type":"array","items":{"type":"record","name":"SparseEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"long","default":0},{"name":"value","type":"float","default":0}]}},"default":[]},{"name":"sparse_id","type":{"type":"array","items":{"type":"record","name":"SparseIdEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"long","default":0},{"name":"value","type":"long","default":0}]}},"default":[]},{"name":"embeddings","type":{"type":"array","items":{"type":"record","name":"EmbeddingsEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"long","default":0},{"name":"value","type":["null",{"type":"record","name":"Embeddings","namespace":"ai.promoted.proto.delivery.internal.features","fields":[{"name":"embeddings","type":{"type":"array","items":"float"},"default":[]}]}],"default":null}]}},"default":[]},{"name":"feature_references","type":{"type":"array","items":{"type":"record","name":"FeatureReference","fields":[{"name":"type","type":{"type":"enum","name":"FeatureReferenceType","symbols":["FEATURE_REFERENCE_TYPE_UNKNOWN","FEATURE_REFERENCE_TYPE_ITEM_FEATURE_STORE","FEATURE_REFERENCE_TYPE_USER_FEATURE_STORE","FEATURE_REFERENCE_TYPE_LOG_USER_FEATURE_STORE","UNRECOGNIZED"]},"default":"FEATURE_REFERENCE_TYPE_UNKNOWN"},{"name":"version","type":{"type":"string","avro.java.string":"String"},"default":""}]}},"default":[]},{"name":"sparse_id_list","type":{"type":"array","items":{"type":"record","name":"SparseIdListEntry","namespace":"ai.promoted.proto.delivery.internal.features.Features","fields":[{"name":"key","type":"long","default":0},{"name":"value","type":["null",{"type":"record","name":"Int64Sequence","namespace":"ai.promoted.proto.delivery.internal.features","fields":[{"name":"ids","type":{"type":"array","items":"long"},"default":[]}]}],"default":null}]}},"default":[]},{"name":"user_events","type":["null",{"type":"record","name":"UserEvents","fields":[{"name":"user_events","type":{"type":"array","items":{"type":"record","name":"UserEvent","fields":[{"name":"event_type","type":"long","default":0},{"name":"content_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"timestamp","type":"long","default":0}]}},"default":[]}]}],"default":null}]}],"default":null}]}],"default":null},{"name":"personalize_stage","type":["null",{"type":"record","name":"PersonalizeStage","fields":[{"name":"personalize_ranking_score","type":"float","default":0},{"name":"score_source","type":{"type":"enum","name":"ScoreSource","symbols":["UNKNOWN","PERSONALIZE","RANDOM","UNRECOGNIZED"]},"default":"UNKNOWN"},{"name":"personalize_ranking_scores","type":{"type":"array","items":{"type":"record","name":"PersonalizeRankingScoresEntry","namespace":"ai.promoted.proto.delivery.PersonalizeStage","fields":[{"name":"key","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"value","type":["null",{"type":"record","name":"Score","namespace":"ai.promoted.proto.delivery","fields":[{"name":"score","type":"float","default":0},{"name":"score_source","type":"ScoreSource","default":"UNKNOWN"},{"name":"model_type","type":{"type":"enum","name":"ModelType","symbols":["UNKNOWN_MODEL_TYPE","CLICK_IMPRESSION_GBDT","CONV_CLICK_GBDT","AWS_PERSONALIZE","CLICK_IMPRESSION_NN","CONV_CLICK_NN","CLICK_IMPRESSION","CONV_CLICK","GBDT","NN_DEFAULT","NN_MTML","UNRECOGNIZED"]},"default":"UNKNOWN_MODEL_TYPE"},{"name":"model_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"model_index","type":"int","default":0}]}],"default":null}]}},"default":[]},{"name":"model_scores","type":{"type":"array","items":"Score"},"default":[]},{"name":"models","type":{"type":"array","items":{"type":"record","name":"Model","fields":[{"name":"model_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"model_type","type":"ModelType","default":"UNKNOWN_MODEL_TYPE"},{"name":"prediction_type","type":{"type":"enum","name":"PredictionType","symbols":["UNKNOWN_PREDICTION_TYPE","NAVIGATE_IMP","CONV_NAVIGATE","PURCHASE_NAVIGATE","LIKE_NAVIGATE","ADDTOCART_NAVIGATE","MULTI_TASK","CHECKOUT_NAVIGATE","UNRECOGNIZED"]},"default":"UNKNOWN_PREDICTION_TYPE"},{"name":"name","type":{"type":"string","avro.java.string":"String"},"default":""}]}},"default":[]}]}],"default":null},{"name":"predictor_stage","type":["null",{"type":"record","name":"PredictorStage","fields":[{"name":"model_scores","type":{"type":"array","items":"Score"},"default":[]},{"name":"backoff_predictors","type":{"type":"array","items":"Model"},"default":[]},{"name":"models","type":{"type":"array","items":"Model"},"default":[]}]}],"default":null},{"name":"blender_stage","type":["null",{"type":"record","name":"BlenderStage","fields":[{"name":"score","type":"float","default":0},{"name":"steps","type":{"type":"array","items":{"type":"record","name":"BlenderStep","fields":[{"name":"force_step","type":["null",{"type":"record","name":"ForceStep","fields":[{"name":"reason","type":{"type":"enum","name":"Reason","namespace":"ai.promoted.proto.delivery.ForceStep","symbols":["UNKNOWN_REASON","PAGING","GEO","UNRECOGNIZED"]},"default":"UNKNOWN_REASON"}]}],"default":null},{"name":"boost_step","type":["null",{"type":"record","name":"BoostStep","fields":[{"name":"fid","type":"long","default":0},{"name":"delta","type":"float","default":0}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"retrieval_rank","type":"long","default":0},{"name":"retrieval_score","type":"float","default":0}]}},"default":[]},{"name":"insertion_matrix_headers","type":{"type":"array","items":{"type":"string","avro.java.string":"String"}},"default":[]},{"name":"insertion_matrix","type":["null",{"type":"record","name":"ListValue1","namespace":"ai.promoted.proto.common","fields":[{"name":"values","type":{"type":"array","items":"Value1"},"default":[]}]}],"default":null},{"name":"properties","type":["null","ai.promoted.proto.common.FlatProperties"],"default":null},{"name":"debug","type":"boolean","default":false}]}],"default":null},{"name":"response","type":["null",{"type":"record","name":"Response","fields":[{"name":"insertion","type":{"type":"array","items":"Insertion"},"default":[]},{"name":"paging_info","type":["null",{"type":"record","name":"PagingInfo","fields":[{"name":"paging_id","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"cursor","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"introspection_data","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"request_id","type":{"type":"string","avro.java.string":"String"},"default":""}]}],"default":null},{"name":"execution","type":["null",{"type":"record","name":"DeliveryExecution","fields":[{"name":"execution_server","type":{"type":"enum","name":"ExecutionServer","symbols":["UNKNOWN_EXECUTION_SERVER","API","SDK","SIMPLE_API","UNRECOGNIZED"]},"default":"UNKNOWN_EXECUTION_SERVER"},{"name":"execution_insertion","type":{"type":"array","items":"Insertion"},"default":[]},{"name":"latency","type":{"type":"array","items":{"type":"record","name":"DeliveryLatency","fields":[{"name":"method","type":{"type":"enum","name":"DeliveryMethod","namespace":"ai.promoted.proto.delivery.DeliveryLatency","symbols":["UNKNOWN_DELIVERY_METHOD","AGGREGATOR__GET_SCORES","AGGREGATOR__RUN_FEATURE_EXTRACTORS","AGGREGATOR__MERGE_FEATURES","AGGREGATOR__RUN_PREDICTOR","AGGREGATOR__GET_PERSONALIZE_SCORES","AGGREGATOR__GET_FEATURES","AGGREGATOR__GET_COUNTS","AGGREGATOR__CALC_EMBEDDINGS","BLENDER_UTIL__GET_BLENDER_RESULTS","BLENDER_UTIL__GET_BLENDER_ITEMS","BLENDER_UTIL__BLENDER_MAIN","PAGING__GET_ALLOCATED","PAGING__ADD_EXECUTION_INSERTIONS","PAGING__GET_RESPONSE_INSERTION_PAGE","UNRECOGNIZED"]},"default":"UNKNOWN_DELIVERY_METHOD"},{"name":"start_millis","type":"long","default":0},{"name":"duration_millis","type":"int","default":0}]}},"default":[]},{"name":"execution_stats","type":["null",{"type":"record","name":"ExecutionStats","fields":[{"name":"stages","type":{"type":"array","items":{"type":"record","name":"StagesEntry","namespace":"ai.promoted.proto.delivery.ExecutionStats","fields":[{"name":"key","type":"int","default":0},{"name":"value","type":["null",{"type":"record","name":"StageStats","namespace":"ai.promoted.proto.delivery","fields":[{"name":"stats","type":{"type":"array","items":{"type":"record","name":"StatsEntry","namespace":"ai.promoted.proto.delivery.StageStats","fields":[{"name":"key","type":"int","default":0},{"name":"value","type":"long","default":0}]}},"default":[]}]}],"default":null}]}},"default":[]}]}],"default":null},{"name":"request_feature_stage","type":["null","FeatureStage"],"default":null},{"name":"user_feature_stage","type":["null","FeatureStage"],"default":null},{"name":"model_ref","type":{"type":"array","items":"Model"},"default":[]},{"name":"server_version","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"after_response_stage","type":["null",{"type":"record","name":"AfterResponseStage","fields":[{"name":"removed_execution_insertion_count","type":"int","default":0}]}],"default":null},{"name":"personalize_stage","type":["null","PersonalizeStage"],"default":null},{"name":"predictor_stage","type":["null","PredictorStage"],"default":null},{"name":"blender_config","type":{"type":"string","avro.java.string":"String"},"default":""},{"name":"hyperloop_log","type":["null",{"type":"record","name":"HyperloopLog","fields":[{"name":"parameter_logs","type":{"type":"array","items":{"type":"record","name":"ParameterLogsEntry","namespace":"ai.promoted.proto.delivery.HyperloopLog","fields":[{"name":"key","type":"long","default":0},{"name":"value","type":["null",{"type":"record","name":"HyperloopParameterLog","namespace":"ai.promoted.proto.delivery","fields":[{"name":"bucket","type":"int","default":0},{"name":"value","type":"float","default":0}]}],"default":null}]}},"default":[]}]}],"default":null}]}],"default":null}]}avro.codecsnappy Î+î]Òõ‘Ö¬—ã!œ7∏Ø H0 -: ,1    ∞”éÈú]	  ; 3 -	21H2 -	$1  VclientE		%é íD
i-1-1  itemIdB   store2  s7  type3ITEM F 6 H4 -	£ 1í$  «6 4            è™'ÑÎ+î]Òõ‘Ö¬—ã!œ7